(window.webpackJsonp=window.webpackJsonp||[]).push([[20],{295:function(e,t,n){"use strict";n.r(t);var a=n(14),s=Object(a.a)({},(function(){var e=this,t=e._self._c;return t("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[t("h1",{attrs:{id:"指南"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#指南"}},[e._v("#")]),e._v(" 指南")]),e._v(" "),t("h2",{attrs:{id:"一分钟集成"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#一分钟集成"}},[e._v("#")]),e._v(" 一分钟集成")]),e._v(" "),t("p",[e._v("推荐使用 "),t("a",{attrs:{href:"https://www.nuget.org/packages/PluginCore",target:"_blank",rel:"noopener noreferrer"}},[e._v("NuGet"),t("OutboundLink")],1),e._v(", 在你项目的根目录 执行下方的命令, 如果你使用 Visual Studio, 这时依次点击 "),t("strong",[e._v("Tools")]),e._v(" -> "),t("strong",[e._v("NuGet Package Manager")]),e._v(" -> "),t("strong",[e._v("Package Manager Console")]),e._v(' , 确保 "Default project" 是你想要安装的项目, 输入下方的命令进行安装.')]),e._v(" "),t("h3",{attrs:{id:"在你的-asp-net-core-项目中集成"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#在你的-asp-net-core-项目中集成"}},[e._v("#")]),e._v(" 在你的 ASP.NET Core 项目中集成")]),e._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[e._v("PM"),t("span",{pre:!0,attrs:{class:"token operator"}},[e._v(">")]),e._v(" Install-Package PluginCore.AspNetCore\n")])])]),t("blockquote",[t("p",[e._v("在你的 ASP.NET Core 应用程序中修改代码")]),e._v(" "),t("p",[e._v("Startup.cs")])]),e._v(" "),t("div",{staticClass:"language-C# extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[e._v("using PluginCore.AspNetCore.Extensions;\n\n// This method gets called by the runtime. Use this method to add services to the container.\npublic void ConfigureServices(IServiceCollection services)\n{\n    services.AddControllers();\n\n    // 1. 添加 PluginCore\n    services.AddPluginCore();\n}\n\n// This method gets called by the runtime. Use this method to configure the HTTP request pipeline.\npublic void Configure(IApplicationBuilder app, IWebHostEnvironment env)\n{\n    if (env.IsDevelopment())\n    {\n        app.UseDeveloperExceptionPage();\n    }\n\n    app.UseHttpsRedirection();\n\n    app.UseRouting();\n\n    // 2. 使用 PluginCore\n    app.UsePluginCore();\n\n    app.UseAuthorization();\n\n    app.UseEndpoints(endpoints =>\n    {\n        endpoints.MapControllers();\n    });\n}\n")])])]),t("blockquote",[t("p",[e._v("现在访问 https://localhost:5001/PluginCore/Admin 即可进入 PluginCore Admin"),t("br"),e._v("\nhttps://localhost:5001 需改为你的地址")])]),e._v(" "),t("h3",{attrs:{id:"注意"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#注意"}},[e._v("#")]),e._v(" 注意")]),e._v(" "),t("p",[e._v("请登录 "),t("code",[e._v("PluginCore Admin")]),e._v(" 后，为了安全，及时修改默认用户名，密码:")]),e._v(" "),t("p",[t("code",[e._v("App_Data/PluginCore.Config.json")])]),e._v(" "),t("div",{staticClass:"language-json extra-class"},[t("pre",{pre:!0,attrs:{class:"language-json"}},[t("code",[t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("{")]),e._v("\n\t"),t("span",{pre:!0,attrs:{class:"token property"}},[e._v('"Admin"')]),t("span",{pre:!0,attrs:{class:"token operator"}},[e._v(":")]),e._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("{")]),e._v("\n\t\t"),t("span",{pre:!0,attrs:{class:"token property"}},[e._v('"UserName"')]),t("span",{pre:!0,attrs:{class:"token operator"}},[e._v(":")]),e._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[e._v('"admin"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(",")]),e._v("\n\t\t"),t("span",{pre:!0,attrs:{class:"token property"}},[e._v('"Password"')]),t("span",{pre:!0,attrs:{class:"token operator"}},[e._v(":")]),e._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[e._v('"ABC12345"')]),e._v("\n\t"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("}")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(",")]),e._v("\n\t"),t("span",{pre:!0,attrs:{class:"token property"}},[e._v('"FrontendMode"')]),t("span",{pre:!0,attrs:{class:"token operator"}},[e._v(":")]),e._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[e._v('"LocalEmbedded"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(",")]),e._v("\n\t"),t("span",{pre:!0,attrs:{class:"token property"}},[e._v('"RemoteFrontend"')]),t("span",{pre:!0,attrs:{class:"token operator"}},[e._v(":")]),e._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[e._v('"https://cdn.jsdelivr.net/gh/yiyungent/plugincore-admin-frontend@0.1.2/dist-cdn"')]),e._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("}")]),e._v("\n")])])]),t("p",[e._v("修改后，立即生效，无需重启站点，需重新登录 "),t("code",[e._v("PluginCore Admin")])]),e._v(" "),t("h2",{attrs:{id:"docker-体验"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#docker-体验"}},[e._v("#")]),e._v(" Docker 体验")]),e._v(" "),t("p",[e._v("如果你需要在本地体验 PluginCore, 那么这里有一个 "),t("a",{attrs:{href:"https://github.com/yiyungent/PluginCore/tree/main/examples",target:"_blank",rel:"noopener noreferrer"}},[e._v("例子(/examples)"),t("OutboundLink")],1)]),e._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[e._v("docker")]),e._v(" run "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[e._v("-d")]),e._v(" "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[e._v("-p")]),e._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[e._v("5004")]),e._v(":80 "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[e._v("-e")]),e._v(" "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[e._v("ASPNETCORE_URLS")]),t("span",{pre:!0,attrs:{class:"token operator"}},[e._v("=")]),t("span",{pre:!0,attrs:{class:"token string"}},[e._v('"http://*:80"')]),e._v(" "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[e._v("--name")]),e._v(" plugincore-aspnetcore3-1 yiyungent/plugincore-aspnetcore3-1\n")])])]),t("p",[e._v("现在你可以访问 http://localhost:5004/PluginCore/Admin")]),e._v(" "),t("blockquote",[t("p",[e._v("补充:"),t("br"),e._v("\n若使用 "),t("code",[e._v("Docker Compose")]),e._v(", 可参考仓库根目录下的 "),t("code",[e._v("docker-compose.yml")])])]),e._v(" "),t("blockquote",[t("p",[e._v("补充:"),t("br"),e._v("\n使用 "),t("code",[e._v("ghcr.io")])]),e._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[e._v("docker")]),e._v(" run "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[e._v("-d")]),e._v(" "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[e._v("-p")]),e._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[e._v("5004")]),e._v(":80 "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[e._v("-e")]),e._v(" "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[e._v("ASPNETCORE_URLS")]),t("span",{pre:!0,attrs:{class:"token operator"}},[e._v("=")]),t("span",{pre:!0,attrs:{class:"token string"}},[e._v('"http://*:80"')]),e._v(" "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[e._v("--name")]),e._v(" plugincore-aspnetcore3-1 ghcr.io/yiyungent/plugincore-aspnetcore3-1\n")])])])]),e._v(" "),t("h2",{attrs:{id:"使用"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#使用"}},[e._v("#")]),e._v(" 使用")]),e._v(" "),t("ul",[t("li",[t("a",{attrs:{href:"https://moeci.com/PluginCore",title:"在线文档",target:"_blank",rel:"noopener noreferrer"}},[e._v("详细文档(/docs)"),t("OutboundLink")],1),e._v(" 文档构建中")]),e._v(" "),t("li",[t("a",{attrs:{href:"https://github.com/yiyungent/PluginCore/tree/main/examples",target:"_blank",rel:"noopener noreferrer"}},[e._v("见示例(/examples)"),t("OutboundLink")],1)])]),e._v(" "),t("h3",{attrs:{id:"添加插件钩子-并应用"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#添加插件钩子-并应用"}},[e._v("#")]),e._v(" 添加插件钩子, 并应用")]),e._v(" "),t("blockquote",[t("p",[e._v("1.例如，自定义插件钩子: "),t("code",[e._v("ITestPlugin")])])]),e._v(" "),t("div",{staticClass:"language-C# extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[e._v("using PluginCore.IPlugins;\n\nnamespace PluginCore.IPlugins\n{\n    public interface ITestPlugin : IPlugin\n    {\n        string Say();\n    }\n}\n")])])]),t("blockquote",[t("p",[e._v("2.在需要激活的地方，应用钩子，这样所有启用的插件中，实现了 "),t("code",[e._v("ITestPlugin")]),e._v(" 的插件，都将调用 "),t("code",[e._v("Say()")])])]),e._v(" "),t("div",{staticClass:"language-C# extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[e._v('using PluginCore;\nusing PluginCore.IPlugins;\n\nnamespace WebApi.Controllers\n{\n    [Route("api/[controller]")]\n    [ApiController]\n    public class TestController : ControllerBase\n    {\n        private readonly PluginFinder _pluginFinder;\n\n        public TestController(PluginFinder pluginFinder)\n        {\n            _pluginFinder = pluginFinder;\n        }\n\n        public ActionResult Get()\n        {\n            //var plugins = PluginFinder.EnablePlugins<BasePlugin>().ToList();\n            // 所有实现了 ITestPlugin 的已启用插件\n            var plugins2 = _pluginFinder.EnablePlugins<ITestPlugin>().ToList();\n\n            foreach (var item in plugins2)\n            {\n                // 调用\n                string words = item.Say();\n                Console.WriteLine(words);\n            }\n\n            return Ok("");\n        }\n    }\n}\n')])])]),t("h3",{attrs:{id:"自定义前端"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#自定义前端"}},[e._v("#")]),e._v(" 自定义前端")]),e._v(" "),t("p",[e._v("PluginCore 支持3种前端文件加载方式")]),e._v(" "),t("blockquote",[t("p",[e._v("配置文件 "),t("code",[e._v("App_Data/PluginCore.Config.json")]),e._v(" 中 "),t("code",[e._v("FrontendMode")])])]),e._v(" "),t("ol",[t("li",[e._v("LocalEmbedded")])]),e._v(" "),t("ul",[t("li",[e._v("默认, 嵌入式资源，前端文件打包进dll, 此模式下, 不容易自定义前端文件，需要修改 "),t("code",[e._v("PluginCore")]),e._v(" 源代码，重新编译，不建议")])]),e._v(" "),t("ol",{attrs:{start:"2"}},[t("li",[e._v("LocalFolder")])]),e._v(" "),t("ul",[t("li",[e._v("在集成了 "),t("code",[e._v("PluginCore")]),e._v(" 的 ASP.NET Core 项目中, 新建 "),t("code",[e._v("PluginCoreAdmin")]),e._v(", 将前端文件放入此文件夹")])]),e._v(" "),t("ol",{attrs:{start:"3"}},[t("li",[e._v("RemoteCDN")])]),e._v(" "),t("ul",[t("li",[e._v("使用远程cdn资源, 可通过 配置文件中 "),t("code",[e._v("RemoteFrontend")]),e._v(" 指定url")])]),e._v(" "),t("blockquote",[t("p",[t("strong",[e._v("注意:")]),t("br"),e._v("\n更新 "),t("code",[e._v("FrontendMode")]),e._v(", 需重启站点后, 才能生效")])]),e._v(" "),t("h3",{attrs:{id:"补充"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#补充"}},[e._v("#")]),e._v(" 补充")]),e._v(" "),t("blockquote",[t("p",[t("strong",[e._v("补充")])]),e._v(" "),t("p",[e._v("开发插件只需要, 添加对 "),t("code",[e._v("PluginCore.IPlugins")]),e._v(" 包 (插件sdk) 的引用即可，")]),e._v(" "),t("p",[e._v("当然如果你需要 "),t("code",[e._v("PluginCore")]),e._v(" ,  也可以添加引用")])]),e._v(" "),t("blockquote",[t("p",[t("strong",[e._v("规范")])]),e._v(" "),t("ol",[t("li",[e._v("插件sdk")])]),e._v(" "),t("p",[e._v("插件接口应当位于 "),t("code",[e._v("PluginCore.IPlugins")]),e._v(" 命名空间，这是规范，不强求，但建议这么做，")]),e._v(" "),t("p",[e._v("程序集名不一定要与命名空间名相同，你完全在你的插件sdk程序集中，使用 "),t("code",[e._v("PluginCore.IPlugins")]),e._v(" 命名空间。")]),e._v(" "),t("ol",{attrs:{start:"2"}},[t("li",[e._v("插件")])]),e._v(" "),t("p",[e._v("插件程序集名(一般=项目(Project)名) 与 插件 "),t("code",[e._v("info.json")]),e._v(" 中 "),t("code",[e._v("PluginId")]),e._v(" 一致, 例如: Project: "),t("code",[e._v("HelloWorldPlugin")]),e._v(", PluginId: "),t("code",[e._v("HelloWorldPlugin")]),e._v(",  此项必须，否则插件无法加载\n"),t("code",[e._v("PluginId")]),e._v(" 为插件唯一标识")])])])}),[],!1,null,null,null);t.default=s.exports}}]);